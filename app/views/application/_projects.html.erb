<% if @projects.empty? %>
  No projects
<% else %>
  <ul class="projects" rel="projects" style="width: <%= @projects.count * 160 %>px;">
  <% @projects.each do |project| %>
    <li class="project">
      <% if project.video_id != nil %>
        <a class="vimeo" href="http://player.vimeo.com/video/<%= project.video_id %>?title=0&amp;byline=0&amp;portrait=0" width="640" height="360" frameborder="0" webkitAllowFullScreen allowFullScreen title="<%= project.description %>">
          <div class="title">
            <span><%= project.title %></span>
            <div class="arrow"></div>
          </div>
          <%= image_tag "/assets/project/#{project.title.downcase.gsub(/\s/, '')}/thumb.png" %>
        </a>
      <% else %>
        <a class="project" href="assets/project/<%= project.title.downcase.gsub(/\s/, '') %>/full.png" title="<%= project.title %>">
          <div class="title">
            <span><%= project.title %></span>
            <div class="arrow"></div>
          </div>
          <%= image_tag "/assets/project/#{project.title.downcase.gsub(/\s/, '')}/thumb.png" %>
        </a>
      <% end %>
    </li>
    </a>
  <% end %>
  </ul>
<% end %>
<script>
  $(function(){
      //Get our elements for faster access and set overlay width
      var div = $('div.projects.container'),
                   ul = $('ul.projects'),
                   // unordered list's left margin
                   ulPadding = 15;

      //Get menu width
      var divWidth = div.width();

      //Remove scrollbars
      div.css({overflow: 'hidden'});

      //Find last image container
      var lastLi = ul.find('li:last-child');

      //When user move mouse over menu
      div.mousemove(function(e){

        //As images are loaded ul width increases,
        //so we recalculate it each time
        var ulWidth = lastLi[0].offsetLeft + lastLi.outerWidth() + ulPadding;

        var left = (e.pageX - div.offset().left) * (ulWidth-divWidth) / divWidth;
        div.scrollLeft(left);
      });
  });
</script>